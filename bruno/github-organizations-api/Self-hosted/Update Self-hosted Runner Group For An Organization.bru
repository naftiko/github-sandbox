meta {
  name: Update Self-hosted Runner Group For An Organization
  type: http
  seq: 4
}

patch {
  url: {{baseUrl}}/orgs/:org/actions/runner-groups/:runner_group_id
  body: json
  auth: inherit
}

params:path {
  org: {{owner}}
  runner_group_id: 1
}

body:json {
  {
    "name": "",
    "visibility": "",
    "allows_public_repositories": false,
    "restricted_to_workflows": false,
    "selected_workflows": []
  }
}

example {
  name: default
  
  request: {
    url: {{baseUrl}}/orgs/:org/actions/runner-groups/:runner_group_id
    method: PATCH
    mode: json
    params:path: {
      org: {{owner}}
      runner_group_id: 1
    }
  
    body:json: {
      {
        "name": "Expensive hardware runners",
        "visibility": "selected"
      }
    }
  }
  
  response: {
    headers: {
      Content-Type: application/json
    }
  
    status: {
      code: 200
      text: OK
    }
  
    body: {
      type: json
      content: '''
        {
          "id": 2,
          "name": "octo-runner-group",
          "visibility": "selected",
          "default": false,
          "selected_repositories_url": "https://api.github.com/orgs/octo-org/actions/runner-groups/2/repositories",
          "runners_url": "https://api.github.com/orgs/octo-org/actions/runner_groups/2/runners",
          "inherited": false,
          "allows_public_repositories": true,
          "restricted_to_workflows": true,
          "selected_workflows": [
            "octo-org/octo-repo/.github/workflows/deploy.yaml@refs/heads/main"
          ],
          "workflow_restrictions_read_only": false
        }
      '''
    }
  }
}
